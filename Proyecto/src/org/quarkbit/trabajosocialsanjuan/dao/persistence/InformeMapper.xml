<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.quarkbit.trabajosocialsanjuan.dao.persistence.InformeMapper" >
  <resultMap id="BaseResultMap" type="org.quarkbit.trabajosocialsanjuan.dao.domain.Informe" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    <id column="codigo_informe" property="codigoInforme" jdbcType="INTEGER" />
    <result column="codigo_kardex" property="codigoKardex" jdbcType="INTEGER" />
    <result column="codigo_institucion" property="codigoInstitucion" jdbcType="INTEGER" />
    <result column="codigo_tipo_informe" property="codigoTipoInforme" jdbcType="CHAR" />
    <result column="codigo_persona_dirigido" property="codigoPersonaDirigido" jdbcType="INTEGER" />
    <result column="codigo_persona_via" property="codigoPersonaVia" jdbcType="INTEGER" />
    <result column="codigo_persona_de_01" property="codigoPersonaDe1" jdbcType="INTEGER" />
    <result column="codigo_persona_de_02" property="codigoPersonaDe2" jdbcType="INTEGER" />
    <result column="codigo_persona_de_03" property="codigoPersonaDe3" jdbcType="INTEGER" />
    <result column="referencia" property="referencia" jdbcType="VARCHAR" />
    <result column="fecha_registro" property="fechaRegistro" jdbcType="DATE" />
    <result column="fecha_envio" property="fechaEnvio" jdbcType="DATE" />
    <result column="diagnostico" property="diagnostico" jdbcType="VARCHAR" />
    <result column="sugerencias" property="sugerencias" jdbcType="VARCHAR" />
    
    <result column="codigo_kardex" property="personaKardex.codigoKardex" jdbcType="INTEGER" />
    <result column="codigo_persona" property="personaKardex.codigoPersona" jdbcType="INTEGER" />
    
    <result column="codigo_persona" property="nino.codigoPersona" jdbcType="INTEGER" />
    <result column="nombres" property="nino.nombres" jdbcType="VARCHAR" />
    <result column="paterno" property="nino.paterno" jdbcType="VARCHAR" />
    <result column="materno" property="nino.materno" jdbcType="VARCHAR" />
    
    <result column="codigo_persona_dirigido" property="personaA.codigoPersona" jdbcType="INTEGER" />
    <result column="nombrespea" property="personaA.nombres" jdbcType="VARCHAR" />
    <result column="paternopea" property="personaA.paterno" jdbcType="VARCHAR" />
    <result column="maternopea" property="personaA.materno" jdbcType="VARCHAR" />
    
    <result column="codigo_persona_via" property="personaVia.codigoPersona" jdbcType="INTEGER" />
    <result column="nombresvia" property="personaVia.nombres" jdbcType="VARCHAR" />
    <result column="paternovia" property="personaVia.paterno" jdbcType="VARCHAR" />
    <result column="maternovia" property="personaVia.materno" jdbcType="VARCHAR" />
    
    <result column="codigo_persona_de_01" property="personaDe1.codigoPersona" jdbcType="INTEGER" />
    <result column="nombresDe01" property="personaDe1.nombres" jdbcType="VARCHAR" />
    <result column="paternoDe01" property="personaDe1.paterno" jdbcType="VARCHAR" />
    <result column="maternoDe01" property="personaDe1.materno" jdbcType="VARCHAR" />
    
    <result column="codigo_persona_de_02" property="personaDe1.codigoPersona" jdbcType="INTEGER" />
    <result column="nombresDe02" property="personaDe1.nombres" jdbcType="VARCHAR" />
    <result column="paternoDe02" property="personaDe1.paterno" jdbcType="VARCHAR" />
    <result column="maternoDe02" property="personaDe1.materno" jdbcType="VARCHAR" />
    
    <result column="codigo_persona_de_03" property="personaDe1.codigoPersona" jdbcType="INTEGER" />
    <result column="nombresDe03" property="personaDe1.nombres" jdbcType="VARCHAR" />
    <result column="paternoDe03" property="personaDe1.paterno" jdbcType="VARCHAR" />
    <result column="maternoDe03" property="personaDe1.materno" jdbcType="VARCHAR" />
    
    
  </resultMap>
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    i.codigo_informe, i.codigo_kardex, i.codigo_institucion, i.codigo_tipo_informe, 
       i.codigo_persona_dirigido, i.codigo_persona_via, i.codigo_persona_de_01, 
       i.codigo_persona_de_02, i.codigo_persona_de_03, i.referencia, i.fecha_registro, 
       i.fecha_envio, i.diagnostico, i.sugerencias,
       p1.nombres ,p1.paterno, p1.materno, p1.codigo_persona,
       peA.nombres as nombrespea ,peA.paterno as paternopea, peA.materno as maternopea,
       peVIA.nombres as nombresvia, peVIA.paterno as paternovia, peVIA.materno as maternovia,
       peDe01.nombres as nombrespeDe01,peDe01.paterno as paternopeDe01, peDe01.materno as maternopeDe01,
       peDe02.nombres as nombresDe02, peDe02.paterno as paternoDe02, peDe02.materno as maternoDe02,
       peDe03.nombres as nombresDe03, peDe03.paterno as paternoDe03, peDe03.materno as maternoDe03
  </sql>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="org.quarkbit.trabajosocialsanjuan.dao.domain.InformeExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    FROM informes i
	LEFT JOIN personas_kardex pk
	ON pk.codigo_kardex = i.codigo_kardex
	LEFT JOIN personas p1
	on pk.codigo_persona = p1.codigo_persona
	LEFT JOIN personas peA
	on peA.codigo_persona = i.codigo_persona_dirigido
	LEFT JOIN personas peVIA
	on peVIA.codigo_persona = i.codigo_persona_via
	LEFT JOIN personas peDe01
	on peDe01.codigo_persona = i.codigo_persona_de_01
	LEFT JOIN personas peDe02
	on peDe02.codigo_persona = i.codigo_persona_de_02
	LEFT JOIN personas peDe03
	on peDe03.codigo_persona = i.codigo_persona_de_03
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    select 
    <include refid="Base_Column_List" />
    FROM informes i
	LEFT JOIN personas_kardex pk
	ON pk.codigo_kardex = i.codigo_kardex
	LEFT JOIN personas p1
	on pk.codigo_persona = p1.codigo_persona
	LEFT JOIN personas peA
	on peA.codigo_persona = i.codigo_persona_dirigido
	LEFT JOIN personas peVIA
	on peVIA.codigo_persona = i.codigo_persona_via
	LEFT JOIN personas peDe01
	on peDe01.codigo_persona = i.codigo_persona_de_01
	LEFT JOIN personas peDe02
	on peDe02.codigo_persona = i.codigo_persona_de_02
	LEFT JOIN personas peDe03
	on peDe03.codigo_persona = i.codigo_persona_de_03
    where i.codigo_informe = #{codigoInforme,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    delete from informes
    where codigo_informe = #{codigoInforme,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByExample" parameterType="org.quarkbit.trabajosocialsanjuan.dao.domain.InformeExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    delete from informes
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="org.quarkbit.trabajosocialsanjuan.dao.domain.Informe" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    insert into informes (codigo_informe, codigo_kardex, codigo_institucion, 
      codigo_tipo_informe, codigo_persona_dirigido, 
      codigo_persona_via, codigo_persona_de_01, codigo_persona_de_02, 
      codigo_persona_de_03, referencia, fecha_registro, 
      fecha_envio, diagnostico, sugerencias
      )
    values (DEFAULT, #{codigoKardex,jdbcType=INTEGER}, #{codigoInstitucion,jdbcType=INTEGER}, 
      #{codigoTipoInforme,jdbcType=CHAR}, #{codigoPersonaDirigido,jdbcType=INTEGER}, 
      #{codigoPersonaVia,jdbcType=INTEGER}, #{codigoPersonaDe1,jdbcType=INTEGER}, #{codigoPersonaDe2,jdbcType=INTEGER}, 
      #{codigoPersonaDe3,jdbcType=INTEGER}, #{referencia,jdbcType=VARCHAR}, DEFAULT, 
      #{fechaEnvio,jdbcType=DATE}, #{diagnostico,jdbcType=VARCHAR}, #{sugerencias,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="org.quarkbit.trabajosocialsanjuan.dao.domain.Informe" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    insert into informes
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="codigoInforme != null" >
        codigo_informe,
      </if>
      <if test="codigoKardex != null" >
        codigo_kardex,
      </if>
      <if test="codigoInstitucion != null" >
        codigo_institucion,
      </if>
      <if test="codigoTipoInforme != null" >
        codigo_tipo_informe,
      </if>
      <if test="codigoPersonaDirigido != null" >
        codigo_persona_dirigido,
      </if>
      <if test="codigoPersonaVia != null" >
        codigo_persona_via,
      </if>
      <if test="codigoPersonaDe1 != null" >
        codigo_persona_de_01,
      </if>
      <if test="codigoPersonaDe2 != null" >
        codigo_persona_de_02,
      </if>
      <if test="codigoPersonaDe3 != null" >
        codigo_persona_de_03,
      </if>
      <if test="referencia != null" >
        referencia,
      </if>
      <if test="fechaRegistro != null" >
        fecha_registro,
      </if>
      <if test="fechaEnvio != null" >
        fecha_envio,
      </if>
      <if test="diagnostico != null" >
        diagnostico,
      </if>
      <if test="sugerencias != null" >
        sugerencias,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="codigoInforme != null" >
        #{codigoInforme,jdbcType=INTEGER},
      </if>
      <if test="codigoKardex != null" >
        #{codigoKardex,jdbcType=INTEGER},
      </if>
      <if test="codigoInstitucion != null" >
        #{codigoInstitucion,jdbcType=INTEGER},
      </if>
      <if test="codigoTipoInforme != null" >
        #{codigoTipoInforme,jdbcType=CHAR},
      </if>
      <if test="codigoPersonaDirigido != null" >
        #{codigoPersonaDirigido,jdbcType=INTEGER},
      </if>
      <if test="codigoPersonaVia != null" >
        #{codigoPersonaVia,jdbcType=INTEGER},
      </if>
      <if test="codigoPersonaDe1 != null" >
        #{codigoPersonaDe1,jdbcType=INTEGER},
      </if>
      <if test="codigoPersonaDe2 != null" >
        #{codigoPersonaDe2,jdbcType=INTEGER},
      </if>
      <if test="codigoPersonaDe3 != null" >
        #{codigoPersonaDe3,jdbcType=INTEGER},
      </if>
      <if test="referencia != null" >
        #{referencia,jdbcType=VARCHAR},
      </if>
      <if test="fechaRegistro != null" >
        #{fechaRegistro,jdbcType=DATE},
      </if>
      <if test="fechaEnvio != null" >
        #{fechaEnvio,jdbcType=DATE},
      </if>
      <if test="diagnostico != null" >
        #{diagnostico,jdbcType=VARCHAR},
      </if>
      <if test="sugerencias != null" >
        #{sugerencias,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="org.quarkbit.trabajosocialsanjuan.dao.domain.InformeExample" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    select count(*) from informes
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    update informes
    <set >
      <if test="record.codigoInforme != null" >
        codigo_informe = #{record.codigoInforme,jdbcType=INTEGER},
      </if>
      <if test="record.codigoKardex != null" >
        codigo_kardex = #{record.codigoKardex,jdbcType=INTEGER},
      </if>
      <if test="record.codigoInstitucion != null" >
        codigo_institucion = #{record.codigoInstitucion,jdbcType=INTEGER},
      </if>
      <if test="record.codigoTipoInforme != null" >
        codigo_tipo_informe = #{record.codigoTipoInforme,jdbcType=CHAR},
      </if>
      <if test="record.codigoPersonaDirigido != null" >
        codigo_persona_dirigido = #{record.codigoPersonaDirigido,jdbcType=INTEGER},
      </if>
      <if test="record.codigoPersonaVia != null" >
        codigo_persona_via = #{record.codigoPersonaVia,jdbcType=INTEGER},
      </if>
      <if test="record.codigoPersonaDe1 != null" >
        codigo_persona_de_01 = #{record.codigoPersonaDe1,jdbcType=INTEGER},
      </if>
      <if test="record.codigoPersonaDe2 != null" >
        codigo_persona_de_02 = #{record.codigoPersonaDe2,jdbcType=INTEGER},
      </if>
      <if test="record.codigoPersonaDe3 != null" >
        codigo_persona_de_03 = #{record.codigoPersonaDe3,jdbcType=INTEGER},
      </if>
      <if test="record.referencia != null" >
        referencia = #{record.referencia,jdbcType=VARCHAR},
      </if>
      <if test="record.fechaRegistro != null" >
        fecha_registro = #{record.fechaRegistro,jdbcType=DATE},
      </if>
      <if test="record.fechaEnvio != null" >
        fecha_envio = #{record.fechaEnvio,jdbcType=DATE},
      </if>
      <if test="record.diagnostico != null" >
        diagnostico = #{record.diagnostico,jdbcType=VARCHAR},
      </if>
      <if test="record.sugerencias != null" >
        sugerencias = #{record.sugerencias,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    update informes
    set codigo_informe = #{record.codigoInforme,jdbcType=INTEGER},
      codigo_kardex = #{record.codigoKardex,jdbcType=INTEGER},
      codigo_institucion = #{record.codigoInstitucion,jdbcType=INTEGER},
      codigo_tipo_informe = #{record.codigoTipoInforme,jdbcType=CHAR},
      codigo_persona_dirigido = #{record.codigoPersonaDirigido,jdbcType=INTEGER},
      codigo_persona_via = #{record.codigoPersonaVia,jdbcType=INTEGER},
      codigo_persona_de_01 = #{record.codigoPersonaDe1,jdbcType=INTEGER},
      codigo_persona_de_02 = #{record.codigoPersonaDe2,jdbcType=INTEGER},
      codigo_persona_de_03 = #{record.codigoPersonaDe3,jdbcType=INTEGER},
      referencia = #{record.referencia,jdbcType=VARCHAR},
      fecha_registro = #{record.fechaRegistro,jdbcType=DATE},
      fecha_envio = #{record.fechaEnvio,jdbcType=DATE},
      diagnostico = #{record.diagnostico,jdbcType=VARCHAR},
      sugerencias = #{record.sugerencias,jdbcType=VARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="org.quarkbit.trabajosocialsanjuan.dao.domain.Informe" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    update informes
    <set >
      <if test="codigoKardex != null" >
        codigo_kardex = #{codigoKardex,jdbcType=INTEGER},
      </if>
      <if test="codigoInstitucion != null" >
        codigo_institucion = #{codigoInstitucion,jdbcType=INTEGER},
      </if>
      <if test="codigoTipoInforme != null" >
        codigo_tipo_informe = #{codigoTipoInforme,jdbcType=CHAR},
      </if>
      <if test="codigoPersonaDirigido != null" >
        codigo_persona_dirigido = #{codigoPersonaDirigido,jdbcType=INTEGER},
      </if>
      <if test="codigoPersonaVia != null" >
        codigo_persona_via = #{codigoPersonaVia,jdbcType=INTEGER},
      </if>
      <if test="codigoPersonaDe1 != null" >
        codigo_persona_de_01 = #{codigoPersonaDe1,jdbcType=INTEGER},
      </if>
      <if test="codigoPersonaDe2 != null" >
        codigo_persona_de_02 = #{codigoPersonaDe2,jdbcType=INTEGER},
      </if>
      <if test="codigoPersonaDe3 != null" >
        codigo_persona_de_03 = #{codigoPersonaDe3,jdbcType=INTEGER},
      </if>
      <if test="referencia != null" >
        referencia = #{referencia,jdbcType=VARCHAR},
      </if>
      <if test="fechaRegistro != null" >
        fecha_registro = #{fechaRegistro,jdbcType=DATE},
      </if>
      <if test="fechaEnvio != null" >
        fecha_envio = #{fechaEnvio,jdbcType=DATE},
      </if>
      <if test="diagnostico != null" >
        diagnostico = #{diagnostico,jdbcType=VARCHAR},
      </if>
      <if test="sugerencias != null" >
        sugerencias = #{sugerencias,jdbcType=VARCHAR},
      </if>
    </set>
    where codigo_informe = #{codigoInforme,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="org.quarkbit.trabajosocialsanjuan.dao.domain.Informe" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 04 17:35:57 BOT 2014.
    -->
    update informes
    set codigo_kardex = #{codigoKardex,jdbcType=INTEGER},
      codigo_institucion = #{codigoInstitucion,jdbcType=INTEGER},
      codigo_tipo_informe = #{codigoTipoInforme,jdbcType=CHAR},
      codigo_persona_dirigido = #{codigoPersonaDirigido,jdbcType=INTEGER},
      codigo_persona_via = #{codigoPersonaVia,jdbcType=INTEGER},
      codigo_persona_de_01 = #{codigoPersonaDe1,jdbcType=INTEGER},
      codigo_persona_de_02 = #{codigoPersonaDe2,jdbcType=INTEGER},
      codigo_persona_de_03 = #{codigoPersonaDe3,jdbcType=INTEGER},
      referencia = #{referencia,jdbcType=VARCHAR},
      fecha_registro = #{fechaRegistro,jdbcType=DATE},
      fecha_envio = #{fechaEnvio,jdbcType=DATE},
      diagnostico = #{diagnostico,jdbcType=VARCHAR},
      sugerencias = #{sugerencias,jdbcType=VARCHAR}
    where codigo_informe = #{codigoInforme,jdbcType=INTEGER}
  </update>
  
   <update id="obtenerUltimoId" parameterType="Map" statementType="CALLABLE">
  		{#{ultimoId,javaType=int,jdbcType=INTEGER,mode=OUT} = call obtener_ultimo_codigo('informes')}   
  </update>
</mapper>